describe("Symphony Hotel Model", function() {
	"use strict";
	
	beforeEach(function() {
		var flag = false,
			that = this;
		$('#sandbox').show();
		
		this.sampleData = {"simpleTitle":"Encore","destination":"Las Vegas","summary":"&lt;ul&gt;&lt;li&gt;Flawless design.&lt;/li&gt;&lt;li&gt;Magnificent pools &amp;amp; nightclubs.&lt;/li&gt;&lt;li&gt;Contemporary atmosphere.&lt;/li&gt;&lt;/ul&gt;","images":[{"path":"/uploads/destinations","filename":"encore-exterior-507446704d5ff.jpg","title":"Encore Hotel","height":1411,"width":1411},{"path":"/uploads/destinations","filename":"dbl-beds-50697fb5b90e1.jpg","title":"Encore Suite and Panoramic Suite","height":1533,"width":2300},{"path":"/uploads/destinations","filename":"tower-king-suite-506987b307608.jpg","title":"Tower King Suite","height":574,"width":1024},{"path":"/uploads/destinations","filename":"las_encore-wynn-salone-suite-50698918ca4f2.jpg","title":"Encore Parlor Suite","height":661,"width":1024},{"path":"/uploads/destinations","filename":"las_encore-wynn-salone-suit-50698921839c1.jpg","title":"Encore Salon Suite","height":1091,"width":1650}],"title":"Encore Hotel","multicomID":"","starRating":5,"overview":"&lt;p&gt;Central to the hotel&amp;apos;s fanciful and intimate atmosphere are sunlit corridors with flowering atria and sprawling pools visible throughout the property. Natural light floods the resort to reveal vibrant butterflies, signature mosaics, textured environments and elegant detailing. &lt;/p&gt;&lt;p&gt;Enjoy the amenities and indulgences of Wynn Las Vegas plus a new array of signature restaurants, designer boutiques, a full-service salon and spa and chic clubs XS, Surrender and Encore Beach Club (seasonal). Extra-spacious suites feature floor-to-ceiling windows with dramatic views.&lt;/p&gt;&lt;p&gt;The Encore is actually part of the Wynn, but there are few differences between the two, and the Encore is more an extension of the notorious and acclaimed Wynn Hotel. The Encore is therefore a hotel built upon a successful reputation, thus destined for greatness within the Las Vegas scene.&lt;/p&gt;","hotelFacilities":"&lt;ul&gt;&lt;li&gt;Casino and Nightclub&lt;/li&gt;&lt;li&gt;5 Signature Restaurants&lt;/li&gt;&lt;li&gt;2,034 rooms&lt;/li&gt;&lt;li&gt;Heated outdoor pool&lt;/li&gt;&lt;li&gt;Golf facilities&lt;/li&gt;&lt;li&gt;Large range of rooms&lt;/li&gt;&lt;/ul&gt;","activities":[{"allow-enquiry":"No","content":"&lt;p&gt;Star Chef Mark LoRusso creates beyond-the-curve steaks, chops and modern cuisine as bold and voluptuous as the Boteros that grace this poolside space. The hip lounge scene gives way to a high energy outdoor experience that extends deep into the night..&lt;/p&gt;","published":"Yes","category":"Fine Dining","images":[{"path":"/uploads/destinations","filename":"botero-restaurant-506dcd4ac9c50.jpg","title":"","height":540,"width":1001}],"title":"Botero","categoryHandle":"fine-dining"},{"allow-enquiry":"No","content":"&lt;p&gt;Star Chef David Walzog redefines all of the steakhouse classics with a deft touch at SW Steakhouse. His innovative menu offers a wide variety of charred, prime-aged steaks and chops, as well as poultry and seafood specialties. An expansive wall of glass windows opens onto an outdoor dining patio overlooking the Lake of Dreams at Wynn Las Vegas.&lt;/p&gt;","published":"Yes","category":"Fine Dining","images":[{"path":"/uploads/destinations","filename":"sw-steakhouse-alt-view-506dcd6f55e3e.jpg","title":"","height":540,"width":1001}],"title":"SW Steakhouse","categoryHandle":"fine-dining"},{"allow-enquiry":"No","content":"&lt;p&gt;What’s up at Wazuzu? Simply the delectably innovative Pan-Asian cooking. This dramatic café showcases an array of Asian cuisine including Chinese, Japanese, Indian, Singaporean and Thai. Wazuzu is located at Encore.&lt;/p&gt;","published":"Yes","category":"Fine Dining","images":[{"path":"/uploads/destinations","filename":"wazuzu-restaurant-506dcd8f28bd2.jpg","title":"","height":540,"width":1001}],"title":"Wazuzu","categoryHandle":"fine-dining"},{"allow-enquiry":"No","content":"&lt;p&gt;Classic Italian cooking, with dishes inspired by some of Frank’s personal favorites. Sinatra&amp;apos;s is a warm and comfortable environment where guests can dine surrounded by original icons from Frank’s career including:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Academy Award for From Here To Eternity, won in 1954&lt;/li&gt;&lt;li&gt;Emmy for Frank Sinatra: A Man and His Music, won in 1967&lt;/li&gt;&lt;li&gt;Grammy for Strangers In The Night, won in 1967&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;Patio tables reminiscent of outdoor dining in Tuscany are available.&lt;br&gt;&lt;/br&gt;\n &lt;/p&gt;","published":"Yes","category":"Fine Dining","images":[{"path":"/uploads/destinations","filename":"sinatra-restaurant-patio-506dcde9af92d.jpg","title":"","height":540,"width":1001}],"title":"Sinatra","categoryHandle":"fine-dining"},{"allow-enquiry":"No","content":"&lt;p&gt;Encore Beach Club has set the standard for trendsetters seeking an upscale and lively pool atmosphere usually found in European hot spots. The 60,000 square foot venue is a lush oasis featuring 40-foot palm trees surrounding three tiered pools, daybeds with private safes and 26 cabanas outfitted with refrigerators and flat-screen televisions.&lt;/p&gt;&lt;p&gt;Eight decadent bungalows offer the venue’s most sought after, high-end seating with private infinity dipping pools, private bathrooms and temperature-controlled cooling systems.&lt;/p&gt;&lt;p&gt;For a cooler spot, guests can choose to lounge on oversized lily pads resting in shallow water or dance under one of the shower poles. Encore Beach Club’s gaming pavilion also offers an opportunity to try your luck at blackjack and craps. Encore Beach Club also features its own grill available to all patrons.&lt;/p&gt;","published":"Yes","category":"Dayclubs &amp; Pool Parties","images":[{"path":"/uploads/destinations","filename":"encore-beach-club-bar-area-506dce05efcb4.jpg","title":"","height":540,"width":1001},{"path":"/uploads/destinations","filename":"encore-beach-club-3-5076da1d32483.jpg","title":"Encore Pool Party","height":401,"width":681}],"title":"Encore Beach Club","categoryHandle":"dayclubs-and-pool-parties"},{"allow-enquiry":"Yes","content":"&lt;p&gt;The chic social scene at Wynn Las Vegas expands with the club at Encore, aptly titled “XS,” where too much is never enough. The poolside ambiance mingles with the nightclub’s decadent vibe to create an oasis at Las Vegas’ most exclusive address. XS is the gold standard in Vegas nightlife, where no extravagance is spared.&lt;/p&gt;&lt;p&gt;The club design is inspired by the sexy curves of the human body. XS provides an elegant and passionate club environment that surrounds Encore’s outdoor pool and island bar, highlighted by a ten-foot rotating chandelier on the dance floor. Guests can sit at an indoor table or enjoy bottle service poolside in one of the outdoor cabanas. Unlike any other nightclub on the Strip, poolside lounge tables also allow for limited complimentary seating.&lt;/p&gt;","published":"Yes","category":"Bars &amp; Nightclubs","images":[{"path":"/uploads/destinations","filename":"xs-5076d7debf0a2.jpg","title":"XS Club","height":720,"width":960}],"title":"XS Nightclub","categoryHandle":"bars-and-nightclubs"},{"allow-enquiry":"No","content":"&lt;p&gt;When the sun goes down, Surrender comes alive and flows into a sophisticated outdoor oasis with poolside cabanas and bungalows whilst the interior club radiates a chic atmosphere with plush VIP tables surrounded by go-go dancers. The club&amp;apos;s signature icon is a 90-foot snake that hovers over the back bar.&lt;/p&gt;&lt;p&gt;DJ&amp;apos;s who&amp;apos;ve spun at Surrender include Tiesto, Afrojack, Calvin Harris, Bingo Players, Lil Jon, Porter Robinson and Dada Life.&lt;/p&gt;","published":"Yes","category":"Bars &amp; Nightclubs","images":[{"path":"/uploads/destinations","filename":"surrender-nightclub-506dce316a423.jpg","title":"","height":540,"width":1001}],"title":"Surrender","categoryHandle":"bars-and-nightclubs"},{"allow-enquiry":"No","content":"&lt;p&gt;Located on hallowed grounds that played host to 50 years of PGA and LGPA Tour events, the golf course at Wynn Las Vegas was built upon a championship legacy. Designed by world famous architect Tom Fazio and Steve Wynn the 18-hole, 7,042-yard, par 70 golf course features dramatic elevations once considered impossible to create on the Las Vegas Strip.&lt;/p&gt;&lt;p&gt;A breathtaking landscape of waterfalls, streams and a forest of trees envelop the contoured fairways to create a course for the discerning player that demands strategy, ingenuity and, most importantly, concentration. Whether challenging your skill on the greens or relaxing in the comfort of our clubhouse lounge, our professional staff and extensive list of amenities make playing at Wynn Las Vegas a luxurious experience.&lt;/p&gt;&lt;p&gt;Golf appropriate attire is required. Registered golfers should wear a collared shirt, soft-spike golf shoes and slacks or shorts (no higher than mid thigh). Denim is not permitted at Wynn Golf Club.&lt;/p&gt;","published":"Yes","category":"Sports &amp; Leisure","images":[{"path":"/uploads/destinations","filename":"wynn-golf-course-5076daff75306.jpg","title":"Wynn Golf Course","height":2448,"width":3264},{"path":"/uploads/destinations","filename":"wynn-golf-image1-5076dc824e918.jpg","title":"The only spectacular course on The Strip","height":1314,"width":2100}],"title":"Wynn &amp; Encore Golf Club","categoryHandle":"sports-and-leisure"},{"allow-enquiry":"Yes","content":"&lt;p&gt;The pools at Encore were inspired by the festive energy of the French Riviera,  Meticulously positioned at the heart of activity, the resort pool and the European pool present scenic views for each of the bars, restaurants, casino and meeting rooms that envelop them. The adults-only European pool allows for topless sunbathing.&lt;/p&gt;&lt;p&gt;All pools are exclusive to Wynn Las Vegas and Encore guests and a valid room key must be presented to gain entry. Pool hours change seasonally.&lt;/p&gt;&lt;p&gt;For the ultimate in luxury lounging, reserve a private cabana. The cabanas offer a private poolside retreat with an array of amenities.Each cabana comes with a team of cabana hosts to take care of your food and beverage orders in addition to any resort related reservations and special requests you may have.&lt;/p&gt;&lt;p&gt;Cabana hours are 9 a.m. to 5 p.m., and each cabana accommodates six people. Non-hotel guests can reserve cabanas with management approval; additional fees may apply. Reservations may be made up to 30 days in advance.&lt;/p&gt;","published":"Yes","category":"Sports &amp; Leisure","images":[{"path":"/uploads/destinations","filename":"encore-beach-club-pool-area-506dce55a5ad8.jpg","title":"","height":540,"width":1001},{"path":"/uploads/destinations","filename":"wynn-pool-5076dd8306adb.jpg","title":"Wynn Pool","height":540,"width":1001}],"title":"Pools and Cabanas","categoryHandle":"sports-and-leisure"}]};
		
		this.sampleMulticomData = {"telephoneNumber":"7026584900","description":"The hotel is located on more than 15 hectares and offers 200 hotel rooms. The air-conditioned property features a lobby with 24-hour reception and check-out service, cloakroom, lift access, auditorium, casino, bar, disco and restaurant. Furthermore, conference facilities, room and laundry services, a car park and a garage are available.","suppliersBoardCode":"RO-U10","availability":"available","contractCode":"GC-B2B;16931- DISRO;GC-B2C","boardCode":"RO","itineraryId":"si1218","currency":"GBP","availableBoardBasis":"RO","accommodationId":"1527373","normalisedName":"SANTA FE STATION","resortName":"North Las Vegas","accommodationCode":"102404","endDate":"20130303","resortId":"11284","type":"Hotel","bookableByFAB":"true","rooms":[{"maxOccupancy":"1","accommodationId":"1527373","hotelName":"Santa Fe Station Hotel Casino","id":"c969941fc98822c41a3e2acd73353f28","code":"1:1:0:0:DBL-U10:ST:GC-B2B","minOccupancy":"1","roomType":"DBL-U10:ST","quantityAvailable":"1","roomRate":{"rateId":"rR9M+CGCfJfzfKAZL8PFRg==","amount":"35.74","endDate":"20130303","startDate":"20130302","suppliersBoardCode":"RO-U10","boardBasis":"RO","currency":"GBP"},"name":"DOUBLE STANDARD"},{"maxOccupancy":"1","accommodationId":"1527373","hotelName":"Santa Fe Station Hotel Casino","id":"6a408a88a17e58b69a3233dca1ae7cab","code":"1:1:0:0:DBL-U10:ST:16931- DISRO","minOccupancy":"1","roomType":"DBL-U10:ST","quantityAvailable":"1","roomRate":{"rateId":"rR9M+CGCfJfzfKAZL8PFRg==","amount":"38.63","endDate":"20130303","startDate":"20130302","suppliersBoardCode":"RO-U10","boardBasis":"RO","currency":"GBP"},"name":"DOUBLE STANDARD"},{"maxOccupancy":"1","accommodationId":"1527373","hotelName":"Santa Fe Station Hotel Casino","id":"11cf4b6ec9bd1b7edfc4b9701b7da015","code":"1:1:0:0:DBL-U10:ST:GC-B2C","minOccupancy":"1","roomType":"DBL-U10:ST","quantityAvailable":"1","roomRate":{"rateId":"rR9M+CGCfJfzfKAZL8PFRg==","amount":"48.28","endDate":"20130303","startDate":"20130302","suppliersBoardCode":"RO-U10","boardBasis":"RO","currency":"GBP"},"name":"DOUBLE STANDARD"}],"syndicatorRanking":"100","supplier":"BAR","accommodationName":"Santa Fe Station Hotel Casino","classCode":"3*","maxChildAge":"17","startDate":"20130302","numNights":"1","officialRating":"3 STARS","basicAdultCost":"35.74","infantAge":"0","supplierLocationId":"LVS|11","address":{"cityOrTown":"LAS VEGAS","address2":"LAS VEGAS","country":"US","address1":"4949 NORTH RANDRO","postCode":"89130"}};

		
		require([
			'models/symphony-hotel',
			'models/multicom/multicom-accommodation'
			], function(SymphonyHotel, MulticomAccommodation) {
			that.model = new SymphonyHotel();
			that.MulticomAccommodation = MulticomAccommodation;
			
			flag = true;
		});
		
		waitsFor(function() {return flag;});
	});
	afterEach(function() {
		$('#sandbox').html('');
		$('#sandbox').hide();
	});
	
	/* Default Spec Code */
	describe('Initializes & Basic Functionality', function(){
		it('Is Not Null', function(){
			expect(this.model).not.toBeNull();
		});
		
		it('Multicom Hotel child is not Null', function(){
			expect(this.model.get('multicomHotel')).not.toBeNull();
		});
		
		it('Can set child class properties', function(){
			this.model.get('multicomHotel').set('accommodationName','test');
			
			expect(this.model.get('multicomHotel').get('accommodationName')).toEqual('test');
		});
		
		it('Can Set from JSON', function(){
			this.model.setFromSymphony(this.sampleData);
			expect(this.model.get('title')).toEqual('Encore Hotel');
			expect(this.model.get('symData')).toBeTruthy();
		});
	});
	
	describe('Multicom Functionality', function(){
		it('Can build from a multicom hotel', function(){
			var mcHotel = new this.MulticomAccommodation(this.sampleMulticomData);
			this.model.buildFromMulticomHotel(mcHotel);
			
			var m = this.model;
			//expect the loading has worked
			expect(m.get('title')).toEqual('Santa Fe Station Hotel Casino');
			expect(m.get('starRating')).toEqual('3');
			expect(m.get('symData')).toBeFalsy();
			expect(m.get('mcData')).toBeTruthy();
			
			//check that the mc data is correct
			expect(m.get('multicomHotel').toJSON().accommodationName).toEqual(mcHotel.toJSON().accommodationName);
		});
		
		
	});

});
